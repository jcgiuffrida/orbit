import{g as p,H as I,d as i,c as v}from"./main-BYd-JLfW.js";const u={async fetchContactAttempts(){return(await p.get("/pings/")).data.results},async fetchContactAttemptsForPerson(t){return(await p.get(`/pings/?person=${t}`)).data.results},async fetchContactAttemptById(t){return(await p.get(`/pings/${t}/`)).data},async createContactAttempt(t){return(await p.post("/pings/",t)).data},async updateContactAttempt(t,n){return(await p.put(`/pings/${t}/`,n)).data},async deleteContactAttempt(t){await p.delete(`/pings/${t}/`)}},h=[{label:"Text Message",value:"text",icon:"sms",color:"info"},{label:"Email",value:"email",icon:"email",color:"secondary"},{label:"Phone Call",value:"call",icon:"phone",color:"positive"},{label:"Social Media",value:"social",icon:"share",color:"accent"},{label:"Other",value:"other",icon:"contact_phone",color:"grey-6"}],$=t=>h.find(c=>c.value===t)?.icon||"contact_phone",O=t=>h.find(c=>c.value===t)?.label||"Other",_=t=>h.find(c=>c.value===t)?.color||"grey-6",H=I("contactAttempts",()=>{const t=i([]),n=i(null),c=i(!1),f=i(!1),m=i(null),d=i(null),A=300*1e3,y=v(()=>d.value?Date.now()-d.value<A:!1),g=v(()=>t.value),w=v(()=>t.value.length),o=a=>{c.value=a,a&&(f.value=!1,m.value=null)},l=a=>{f.value=!0,m.value=a,c.value=!1},r=()=>{f.value=!1,m.value=null};return{contactAttempts:t,selectedContactAttempt:n,isLoading:c,hasError:f,error:m,getContactAttemptsList:g,contactAttemptsCount:w,isCacheValid:y,fetchContactAttempts:async(a=!1)=>{if(!a&&y.value&&t.value.length>0)return t.value;o(!0),r();try{const e=await u.fetchContactAttempts();return t.value=e,d.value=Date.now(),e}catch(e){throw console.error("Failed to fetch contact attempts:",e),l("Failed to load contact attempts"),e}finally{o(!1)}},fetchContactAttemptsForPerson:async a=>{o(!0),r();try{return await u.fetchContactAttemptsForPerson(a)}catch(e){throw console.error("Failed to fetch contact attempts for person:",e),l("Failed to load contact attempts"),e}finally{o(!1)}},fetchContactAttemptById:async a=>{o(!0),r();try{const e=await u.fetchContactAttemptById(a);n.value=e;const s=t.value.findIndex(C=>C.id===a);return s>=0&&(t.value[s]=e),e}catch(e){throw console.error("Failed to fetch contact attempt:",e),l("Failed to load contact attempt details"),e}finally{o(!1)}},createContactAttempt:async a=>{o(!0),r();try{const e=await u.createContactAttempt(a);return t.value.unshift(e),d.value=Date.now(),e}catch(e){throw console.error("Failed to create contact attempt:",e),l("Failed to create contact attempt"),e}finally{o(!1)}},updateContactAttempt:async(a,e)=>{o(!0),r();try{const s=await u.updateContactAttempt(a,e),C=t.value.findIndex(F=>F.id===a);return C>=0&&(t.value[C]=s),n.value?.id===a&&(n.value=s),s}catch(s){throw console.error("Failed to update contact attempt:",s),l("Failed to update contact attempt"),s}finally{o(!1)}},deleteContactAttempt:async a=>{o(!0),r();try{await u.deleteContactAttempt(a),t.value=t.value.filter(e=>e.id!==a),n.value?.id===a&&(n.value=null)}catch(e){throw console.error("Failed to delete contact attempt:",e),l("Failed to delete contact attempt"),e}finally{o(!1)}},clearSelectedContactAttempt:()=>{n.value=null},invalidateCache:()=>{d.value=null}}});export{_ as a,$ as b,h as c,O as g,H as u};
