import{_ as D,d as _,e as T,f as k,w as i,u as P,o,b as a,a as n,Q as N,h as e,i as y,t as d,j as p,k as v,n as q,p as w,F as O,q as $,v as g,l as h,G as z,O as F}from"./main-BYd-JLfW.js";import{Q as L}from"./QTooltip-CQM5UkJt.js";import{f as S,_ as R,a as j,Q as A,b as M}from"./NavigationDrawer-DbK3DJpq.js";import"./position-engine-A1RGnPhx.js";const U={key:0,class:"flex flex-center q-mt-lg"},E={key:1,class:"text-center q-mt-lg"},H={class:"text-body2"},I={key:2},Y={key:0,class:"text-center q-mt-xl"},G={key:1,class:"row q-col-gutter-md"},W={class:"col-12"},J={class:"text-h6 q-mb-md"},K={class:"birthday-timeline"},X={class:"row items-center q-gutter-md"},Z={class:"col-auto birthday-date-col"},tt={key:0,class:"text-h6 text-weight-bold"},et={key:1,class:"text-subtitle1 text-weight-bold"},st={key:2,class:"text-subtitle1 text-weight-bold"},at={key:3,class:"text-body2"},ot={class:"col"},lt={class:"row items-center q-gutter-md"},nt={class:"col-auto"},it={class:"col"},dt={class:"text-h6"},rt={class:"text-subtitle2 text-grey-6"},ct={key:0,class:"q-ml-sm"},ut={key:0,class:"text-caption text-grey-6"},_t={class:"col-auto"},mt={__name:"BirthdaysView",setup(yt){const f=P(),c=_(!1),m=_(!0),u=_(null),r=_(null),x=async()=>{m.value=!0,u.value=null;try{const l=await fetch("/api/birthdays/",{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(`HTTP ${l.status}`);r.value=await l.json()}catch(l){console.error("Failed to load birthdays:",l),u.value="Unable to load birthdays. Please try again."}finally{m.value=!1}},b=l=>{f.push({name:"person-detail",params:{id:l}})},C=l=>{f.push({name:"ping-create",query:{person:l}})},Q=l=>l?new Date(l).toLocaleDateString(void 0,{month:"short",day:"numeric"}):"";return T(()=>{x()}),(l,s)=>(o(),k(S,{view:"lHh Lpr lFf"},{default:i(()=>[a(R,{onToggleDrawer:s[0]||(s[0]=t=>c.value=!c.value)}),a(j,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t)},null,8,["modelValue"]),a(A,null,{default:i(()=>[a(M,{class:"q-pa-md",style:{"background-color":"#f8f9fa"}},{default:i(()=>[m.value?(o(),n("div",U,[a(N,{size:"2em"})])):u.value?(o(),n("div",E,[a(y,{name:"error",size:"2em",color:"negative"}),s[3]||(s[3]=e("div",{class:"text-h6 q-mt-md"},"Failed to load birthdays",-1)),e("div",H,d(u.value),1),a(p,{onClick:x,color:"primary",class:"q-mt-md"},{default:i(()=>[...s[2]||(s[2]=[v("Retry",-1)])]),_:1})])):(o(),n("div",I,[s[7]||(s[7]=e("div",{class:"row items-center q-mb-lg"},[e("div",{class:"col"},[e("h1",{class:"text-h4 q-ma-none"}," Birthday Calendar "),e("p",{class:"text-subtitle1 text-grey-6 q-ma-none q-mt-sm"}," Upcoming birthdays starting today ")])],-1)),!r.value||r.value.birthdays.length===0?(o(),n("div",Y,[a(y,{name:"cake",size:"80px",color:"grey-5"}),s[4]||(s[4]=e("div",{class:"text-h6 q-mt-md text-grey-7"},"No upcoming birthdays",-1)),s[5]||(s[5]=e("div",{class:"text-body2 text-grey-6"}," Add birthday information to people's profiles to see them here ",-1)),a(p,{color:"primary",to:{name:"people"},class:"q-mt-md",label:"View People"})])):(o(),n("div",G,[e("div",W,[a(q,null,{default:i(()=>[a(w,null,{default:i(()=>[e("div",J,"Next "+d(r.value.birthdays.length)+" Birthdays",1),e("div",K,[(o(!0),n(O,null,$(r.value.birthdays,(t,B)=>(o(),n("div",{key:t.id,class:g(["birthday-entry q-mb-md",{"birthday-today":t.is_today}])},[e("div",X,[e("div",Z,[e("div",{class:g(["birthday-date-badge q-pa-md text-center",{"bg-accent text-white":t.is_today,"bg-primary text-white":t.days_until<=7&&!t.is_today,"bg-grey-2":t.days_until>7}])},[t.is_today?(o(),n("div",tt,"TODAY")):t.days_until===1?(o(),n("div",et,"TOMORROW")):t.days_until<=7?(o(),n("div",st,d(t.days_until)+" DAYS ",1)):(o(),n("div",at,d(Q(t.next_birthday)),1))],2)]),e("div",ot,[a(q,{flat:"",class:g(["cursor-pointer birthday-person-card",{"bg-accent-1":t.is_today}]),onClick:V=>b(t.id)},{default:i(()=>[a(w,{class:"q-pa-md"},{default:i(()=>[e("div",lt,[e("div",nt,[a(y,{name:t.is_today?"celebration":"cake",size:"32px",color:t.is_today?"accent":"primary"},null,8,["name","color"])]),e("div",it,[e("div",dt,d(t.name),1),e("div",rt,[v(d(t.birthday_display)+" ",1),t.age?(o(),n("span",ct,"(turning "+d(t.age+1*!t.is_today)+")",1)):h("",!0)]),t.name_ext?(o(),n("div",ut,d(t.name_ext),1)):h("",!0)]),e("div",_t,[a(p,{flat:"",dense:"",round:"",icon:"contact_phone",color:"grey-6",onClick:z(V=>C(t.id),["stop"])},{default:i(()=>[a(L,null,{default:i(()=>[...s[6]||(s[6]=[v("Log Birthday Ping",-1)])]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1032,["class","onClick"])])]),B<r.value.birthdays.length-1?(o(),k(F,{key:0,class:"q-mt-md",color:"grey-3"})):h("",!0)],2))),128))])]),_:1})]),_:1})])]))]))]),_:1})]),_:1})]),_:1}))}},ft=D(mt,[["__scopeId","data-v-0f4c3af0"]]);export{ft as default};
