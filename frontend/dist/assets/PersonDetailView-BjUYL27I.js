import{Q as X}from"./QSpinnerDots-CwKbjeWt.js";import{g as A,H as ue,d as P,c as E,_ as ae,I as pe,J as le,e as ne,r as me,f as H,o as r,w as n,b as e,p as V,h as o,a as u,j as C,i as q,F as ie,q as re,k as R,t as p,l as w,K as Z,n as Q,E as ve,s as ee,L as te,M as ye,u as fe,m as I,v as he}from"./main-BYd-JLfW.js";import{Q as ge,a as oe}from"./QBreadcrumbs-CPDb7tG-.js";import{Q as Y}from"./QTooltip-CQM5UkJt.js";import{u as de,d as _e,e as be,f as xe,_ as we,a as qe,Q as Ce,b as ke}from"./NavigationDrawer-DbK3DJpq.js";import{u as ce}from"./people-zL_9e_-H.js";import{u as Re,g as Pe,a as De,b as $e}from"./conversations-Bc13NCq5.js";import{f as Fe}from"./dateFormatting-Bb5cIjpU.js";import{Q as se}from"./QSelect-B6sKm9-Y.js";import"./position-engine-A1RGnPhx.js";import"./QItemLabel-DA6ERGA0.js";const j={async getAll(){return(await A.get("relationships/")).data},async getByPerson(d){const v=await A.get("relationships/");return(v.data.results||v.data).filter(x=>x.person1===d||x.person2===d)},async getById(d){return(await A.get(`relationships/${d}/`)).data},async create(d){return(await A.post("relationships/",d)).data},async update(d,v){return(await A.put(`relationships/${d}/`,v)).data},async partialUpdate(d,v){return(await A.patch(`relationships/${d}/`,v)).data},async delete(d){return await A.delete(`relationships/${d}/`),!0},getRelationshipTypes(){return[{label:"Partner",value:"partner"},{label:"Family",value:"family"},{label:"Friend",value:"friend"},{label:"Colleague",value:"colleague"},{label:"Acquaintance",value:"acquaintance"},{label:"Other",value:"other"}]}},Te=ue("relationships",()=>{const d=P([]),v=P(!1),y=P(!1),x=P(null),g=P(null),S=1800*1e3,z=E(()=>g.value?Date.now()-g.value<S:!1),F=E(()=>d.value),$=E(()=>d.value.length),f=_=>{v.value=_,_&&(y.value=!1,x.value=null)},t=_=>{y.value=!0,x.value=_,v.value=!1},k=()=>{y.value=!1,x.value=null};return{relationships:d,isLoading:v,hasError:y,error:x,getRelationshipsList:F,relationshipsCount:$,isCacheValid:z,fetchAllRelationships:async(_=!1)=>{if(!_&&z.value&&d.value.length>0)return d.value;f(!0),k();try{const m=await j.getAll();return d.value=m.results||m,g.value=Date.now(),d.value}catch(m){throw console.error("Failed to fetch relationships:",m),t("Failed to load relationships"),m}finally{f(!1)}},getRelationshipsForPerson:_=>d.value.filter(m=>m.person1===_||m.person2===_),createRelationship:async _=>{f(!0),k();try{const m=await j.create(_);return d.value.push(m),g.value=Date.now(),m}catch(m){throw console.error("Failed to create relationship:",m),t("Failed to create relationship"),m}finally{f(!1)}},updateRelationship:async(_,m)=>{f(!0),k();try{const T=await j.update(_,m),N=d.value.findIndex(O=>O.id===_);return N>=0&&(d.value[N]=T),T}catch(T){throw console.error("Failed to update relationship:",T),t("Failed to update relationship"),T}finally{f(!1)}},deleteRelationship:async _=>{f(!0),k();try{await j.delete(_),d.value=d.value.filter(m=>m.id!==_)}catch(m){throw console.error("Failed to delete relationship:",m),t("Failed to delete relationship"),m}finally{f(!1)}},invalidateCache:()=>{g.value=null}}}),Ve={class:"row items-center q-mb-md"},ze={key:0,class:"text-center q-pa-md"},Le={key:1,class:"text-center q-pa-lg"},Qe={key:2},Ae={class:"row items-center q-gutter-sm"},Ie={class:"col"},Ee={class:"text-body1"},Se={class:"text-caption text-grey-6"},Ne={key:0},Be={class:"row q-gutter-xs"},Ue={class:"text-h6"},Me={class:"q-gutter-md"},Oe={class:"q-ml-sm"},He={__name:"PersonRelationships",props:{personId:{type:String,required:!0},personName:{type:String,required:!0}},setup(d){const v=d,y=de(),x=ce(),g=Te(),S=E(()=>g.getRelationshipsForPerson(v.personId)),z=E(()=>g.isLoading),F=P(!1),$=P(!1),f=P(!1),t=P(null),k=P(null),L=P([]),b=pe({selectedPerson:null,relationshipType:"",description:""}),B=E(()=>j.getRelationshipTypes()),U=async(l=!1)=>{try{await g.fetchAllRelationships(l)}catch(a){console.error("Error loading relationships:",a),y.notify({type:"negative",message:"Failed to load relationships",position:"top",timeout:3e3})}},M=async()=>{try{const l=x.peopleCount<=1;await x.fetchPeople(l);const a=x.getPeopleList;L.value=a.filter(D=>D.id!==v.personId)}catch(l){console.error("Error loading people:",l),y.notify({type:"negative",message:"Failed to load people list",position:"top",timeout:3e3})}},J=(l,a)=>{a(()=>{const D=x.getPeopleList;if(l==="")L.value=D.filter(c=>c.id!==v.personId);else{const c=l.toLowerCase();L.value=D.filter(K=>K.id!==v.personId&&K.name.toLowerCase().includes(c))}})},_=l=>l.person1===v.personId?l.person2_name:l.person1_name,m=l=>{const a=B.value.find(D=>D.value===l);return a?a.label:l},T=l=>({partner:"favorite",family:"family_restroom",friend:"people",colleague:"work",acquaintance:"person",other:"help"})[l]||"person",N=l=>{t.value=l,b.selectedPerson=l.person1===v.personId?l.person2:l.person1,b.relationshipType=l.relationship_type,b.description=l.description||"",$.value=!0},O=l=>{k.value=l,f.value=!0},G=async()=>{if(!b.selectedPerson||!b.relationshipType){y.notify({type:"warning",message:"Please fill in all required fields",position:"top",timeout:3e3});return}F.value=!0;try{const l={person1:v.personId,person2:b.selectedPerson,relationship_type:b.relationshipType,description:b.description||""};t.value?(await g.updateRelationship(t.value.id,l),y.notify({type:"positive",message:"Relationship updated successfully",position:"top",timeout:3e3})):(await g.createRelationship(l),y.notify({type:"positive",message:"Relationship added successfully",position:"top",timeout:3e3})),h()}catch(l){console.error("Error saving relationship:",l),y.notify({type:"negative",message:`Failed to ${t.value?"update":"add"} relationship`,position:"top",timeout:3e3})}finally{F.value=!1}},W=async()=>{if(k.value)try{await g.deleteRelationship(k.value.id),y.notify({type:"positive",message:"Relationship deleted successfully",position:"top",timeout:3e3}),f.value=!1,k.value=null}catch(l){console.error("Error deleting relationship:",l),y.notify({type:"negative",message:"Failed to delete relationship",position:"top",timeout:3e3})}},i=async()=>{await s(),$.value=!0},s=async()=>{L.value.length<1&&await M()},h=()=>{$.value=!1,t.value=null,b.selectedPerson=null,b.relationshipType="",b.description=""};return le(()=>v.personId,(l,a)=>{l&&l!==a&&!g.isCacheValid&&U()},{immediate:!1}),ne(()=>{(!g.isCacheValid||g.relationshipsCount===0)&&U(),M()}),(l,a)=>{const D=me("router-link");return r(),H(Q,{class:"content-card",flat:"",bordered:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[o("div",Ve,[a[6]||(a[6]=o("div",{class:"text-h6 text-weight-medium col"},"Relationships",-1)),e(C,{outline:"",color:"primary",icon:"add",label:"Add Relationship",size:"sm",onClick:i})]),z.value?(r(),u("div",ze,[e(X,{size:"30px",color:"primary"}),a[7]||(a[7]=o("div",{class:"q-mt-sm text-grey-6"},"Loading relationships...",-1))])):S.value.length===0?(r(),u("div",Le,[e(q,{name:"people_outline",size:"48px",color:"grey-5"}),a[8]||(a[8]=o("div",{class:"text-body2 text-grey-6 q-mt-sm"},"No relationships recorded",-1))])):(r(),u("div",Qe,[(r(!0),u(ie,null,re(S.value,c=>(r(),u("div",{key:c.id,class:"relationship-item q-mb-md"},[o("div",Ae,[e(q,{name:T(c.relationship_type),size:"20px",color:"grey-7"},null,8,["name"]),o("div",Ie,[o("div",Ee,[e(D,{to:{name:"person-detail",params:{id:_(c)===c.person1_name?c.person1:c.person2}}},{default:n(()=>[R(p(_(c)),1)]),_:2},1032,["to"])]),o("div",Se,[R(p(m(c.relationship_type))+" ",1),c.description?(r(),u("span",Ne," • "+p(c.description),1)):w("",!0)])]),o("div",Be,[e(C,{flat:"",dense:"",round:"",size:"sm",icon:"edit",color:"grey-6",onClick:K=>N(c)},{default:n(()=>[e(Y,null,{default:n(()=>[...a[9]||(a[9]=[R("Edit",-1)])]),_:1})]),_:2},1032,["onClick"]),e(C,{flat:"",dense:"",round:"",size:"sm",icon:"delete",color:"grey-6",onClick:K=>O(c)},{default:n(()=>[e(Y,null,{default:n(()=>[...a[10]||(a[10]=[R("Delete",-1)])]),_:1})]),_:2},1032,["onClick"])])])]))),128))]))]),_:1}),e(Z,{modelValue:$.value,"onUpdate:modelValue":a[3]||(a[3]=c=>$.value=c)},{default:n(()=>[e(Q,{style:{"min-width":"400px"}},{default:n(()=>[e(V,null,{default:n(()=>[o("div",Ue,p(t.value?"Edit Relationship":"Add Relationship"),1)]),_:1}),e(V,{class:"q-pt-none"},{default:n(()=>[o("div",Me,[e(se,{modelValue:b.selectedPerson,"onUpdate:modelValue":a[0]||(a[0]=c=>b.selectedPerson=c),options:L.value,"option-label":"name","option-value":"id",label:"Person *",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",clearable:"",autofocus:"","emit-value":"","map-options":"",onFilter:J,onPopupShow:s,rules:[c=>!!c||"Person is required"]},{"no-option":n(()=>[e(_e,null,{default:n(()=>[e(be,{class:"text-grey"},{default:n(()=>[R(p(L.value.length===0?"Loading people...":"No people found"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"]),e(se,{modelValue:b.relationshipType,"onUpdate:modelValue":a[1]||(a[1]=c=>b.relationshipType=c),options:B.value,label:"Relationship Type *",filled:"","emit-value":"","map-options":"",rules:[c=>!!c||"Relationship type is required"]},null,8,["modelValue","options","rules"]),e(ve,{modelValue:b.description,"onUpdate:modelValue":a[2]||(a[2]=c=>b.description=c),label:"Description",hint:"e.g., 'college roommate', 'sister-in-law'",filled:"",autocomplete:"off"},null,8,["modelValue"])])]),_:1}),e(ee,{align:"right"},{default:n(()=>[e(C,{flat:"",label:"Cancel",color:"grey-7",onClick:h}),e(C,{flat:"",label:t.value?"Save Changes":"Add Relationship",color:"primary",loading:F.value,onClick:G},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=c=>f.value=c)},{default:n(()=>[e(Q,null,{default:n(()=>[e(V,{class:"row items-center"},{default:n(()=>[e(te,{icon:"warning",color:"negative","text-color":"white"}),o("span",Oe,[a[11]||(a[11]=R(" Are you sure you want to delete the relationship with ",-1)),o("strong",null,p(k.value?.person1_name===d.personName?k.value?.person2_name:k.value?.person1_name),1),a[12]||(a[12]=R("? ",-1))])]),_:1}),e(ee,{align:"between"},{default:n(()=>[e(C,{flat:"",label:"Cancel",color:"grey-7",onClick:a[4]||(a[4]=c=>f.value=!1)}),e(C,{flat:"",label:"Delete",color:"negative",onClick:W})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},je=ae(He,[["__scopeId","data-v-2e32aae6"]]),Je={key:0,class:"text-center q-pa-xl"},Ke={key:1,class:"text-center q-pa-xl"},Ye={class:"text-h6 text-negative q-mt-md"},Ge={key:2,class:"text-center q-pa-xl"},We={key:3,class:"person-detail-container"},Xe={class:"breadcrumb-nav q-mb-md"},Ze={class:"row items-start q-gutter-md"},et={class:"col"},tt={class:"text-h4 q-mb-sm text-weight-medium"},ot={key:0,class:"text-h6 text-grey-7 q-mb-md"},st={class:"text-body2 text-grey-6"},at={key:0},lt={class:"col-auto"},nt={class:"action-buttons"},it={class:"row q-col-gutter-lg"},rt={class:"col-12 col-md-6"},dt={key:0,class:"contact-item q-mb-md"},ct={class:"row items-center q-gutter-sm"},ut={class:"col text-body1"},pt={key:1,class:"contact-item q-mb-md"},mt={class:"row items-start q-gutter-sm"},vt={class:"col text-body1",style:{"white-space":"pre-line"}},yt={key:2,class:"contact-item q-mb-md"},ft={class:"row items-center q-gutter-sm"},ht={class:"col text-body1"},gt={key:3,class:"contact-item q-mb-md"},_t={class:"row items-center q-gutter-sm"},bt={class:"col text-body1"},xt={key:4,class:"contact-item q-mb-md"},wt={class:"row items-center q-gutter-sm"},qt={class:"col text-body1"},Ct={key:5,class:"contact-item q-mb-md"},kt={class:"row items-center q-gutter-sm"},Rt={class:"col"},Pt={class:"text-body1"},Dt={key:0,class:"text-grey-6"},$t={key:6,class:"contact-item q-mb-md"},Ft={class:"row items-center q-gutter-sm"},Tt={class:"col"},Vt={key:7,class:"contact-item"},zt={class:"row items-start q-gutter-sm"},Lt={class:"col q-ml-sm"},Qt={class:"text-body2 text-grey-7"},At={class:"text-body1 text-grey-8 pre-line"},It={class:"col-12 col-md-6"},Et={class:"text-body1 text-grey-8 pre-line ai-summary-text"},St={class:"text-h6 q-mb-md text-weight-medium"},Nt={key:0,class:"q-badge bg-grey-7 q-ml-sm"},Bt={key:0,class:"text-center q-pa-md"},Ut={key:1,class:"text-center q-pa-md"},Mt={key:2,class:"conversations-scroll-container"},Ot=["onClick"],Ht={class:"row items-start q-gutter-sm"},jt={class:"col"},Jt={class:"text-body2 text-weight-medium q-mb-xs"},Kt={key:0},Yt={class:"text-caption text-grey-6 q-mb-xs"},Gt={class:"text-body2 text-grey-7 conversation-preview"},Wt={key:0,class:"q-mt-sm text-warning"},Xt={class:"q-ml-sm"},Zt={__name:"PersonDetailView",setup(d){const v=ye(),y=fe(),x=de(),g=ce(),S=Re(),z=P(!1),F=P(!1),$=P(!1),f=P([]),t=E(()=>g.selectedPerson),k=async()=>{const i=v.params.id;if(i)try{await g.fetchPersonById(i),await L()}catch(s){console.error("Failed to load person:",s)}},L=async()=>{if(t.value){$.value=!0,f.value=[];try{const i=await S.fetchConversationsForPerson(t.value.id);f.value=i||[]}catch(i){console.error("Failed to load conversations:",i),f.value=[]}finally{$.value=!1}}},b=()=>{y.push({name:"people"})},B=()=>{t.value&&y.push({name:"person-edit",params:{id:t.value.id}})},U=async()=>{if(t.value)try{const i=t.value.name;await g.deletePerson(t.value.id),F.value=!1,x.notify({type:"positive",message:`${i} deleted successfully`,position:"top",timeout:4e3,actions:[{icon:"close",color:"white",dense:!0}]}),y.push({name:"people"})}catch(i){console.error("Failed to delete person:",i),x.notify({type:"negative",message:"Failed to delete person. Please try again.",position:"top",timeout:4e3})}},M=async()=>{if(t.value?.email)try{await navigator.clipboard.writeText(t.value.email),x.notify({type:"positive",message:`Email copied: ${t.value.email}`,position:"top",timeout:3e3,actions:[{icon:"close",color:"white",dense:!0}]})}catch(i){console.error("Failed to copy email:",i),x.notify({type:"negative",message:"Failed to copy email address",position:"top",timeout:3e3})}},J=async()=>{if(t.value?.phone)try{await navigator.clipboard.writeText(t.value.phone),x.notify({type:"positive",message:`Phone number copied: ${t.value.phone}`,position:"top",timeout:3e3,actions:[{icon:"close",color:"white",dense:!0}]})}catch(i){console.error("Failed to copy phone number:",i),x.notify({type:"negative",message:"Failed to copy phone number",position:"top",timeout:3e3})}},_=()=>{t.value&&y.push({name:"conversation-create",query:{participants:t.value.id}})},m=()=>{t.value&&y.push({name:"ping-create",query:{person:t.value.id}})},T=i=>{if(!i)return"Never";const s=new Date(i),l=new Date-s,a=Math.floor(l/(1e3*60*60*24));if(a===0)return"Today";if(a===1)return"Yesterday";if(a<7)return a===1?"1 day ago":`${a} days ago`;if(a<30){const D=Math.floor(a/7);return D===1?"1 week ago":`${D} weeks ago`}if(a<365){const D=Math.floor(a/30);return D===1?"1 month ago":`${D} months ago`}return s.toLocaleDateString()},N=(i,s)=>!i||i.length<=s?i:i.substring(0,s).trim()+"...",O=i=>{y.push({name:"conversation-detail",params:{id:i.id}})},G=i=>{if(!i)return"grey-6";const s=new Date(i),l=new Date-s,a=Math.floor(l/(1e3*60*60*24));return a<=60?"positive":a<=365?"grey-7":"negative"},W=i=>{if(!i)return"text-grey-6";const s=new Date(i),l=new Date-s,a=Math.floor(l/(1e3*60*60*24));return a<=60?"text-positive":a<=365?"text-grey-8":"text-negative"};return le(()=>v.params.id,(i,s)=>{i&&i!==s&&(f.value=[],k())}),ne(()=>{k()}),(i,s)=>(r(),H(xe,{view:"lHh Lpr lFf"},{default:n(()=>[e(we,{onToggleDrawer:s[0]||(s[0]=h=>z.value=!z.value)}),e(qe,{modelValue:z.value,"onUpdate:modelValue":s[1]||(s[1]=h=>z.value=h)},null,8,["modelValue"]),e(Ce,null,{default:n(()=>[e(ke,{class:"q-pa-md",style:{"background-color":"#f8f9fa"}},{default:n(()=>[I(g).isLoading?(r(),u("div",Je,[e(X,{size:"50px",color:"primary"}),s[5]||(s[5]=o("div",{class:"q-mt-md"},"Loading person details...",-1))])):I(g).hasError?(r(),u("div",Ke,[e(q,{name:"error_outline",size:"80px",color:"negative"}),o("div",Ye,p(I(g).error),1),e(C,{color:"primary",label:"Try Again",class:"q-mt-md",onClick:k})])):t.value?(r(),u("div",We,[o("div",Xe,[e(ge,{class:"text-grey-6"},{default:n(()=>[e(oe,{icon:"people",label:"People",onClick:b,class:"cursor-pointer"}),e(oe,{label:t.value.name},null,8,["label"])]),_:1})]),e(Q,{class:"header-card q-mb-lg",flat:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[o("div",Ze,[o("div",et,[o("div",tt,p(t.value.name),1),t.value.name_ext?(r(),u("div",ot,p(t.value.name_ext),1)):w("",!0),o("div",st,[e(q,{name:"schedule",size:"16px",class:"q-mr-xs"}),R(" Added "+p(T(t.value.created_at))+" ",1),t.value.created_by_username?(r(),u("span",at," by "+p(t.value.created_by_username),1)):w("",!0)])]),o("div",lt,[o("div",nt,[e(C,{color:"secondary",icon:"chat_bubble",label:"Log Conversation",class:"q-mr-sm q-mb-sm",onClick:_}),e(C,{outline:"",color:"secondary",icon:"contact_phone",label:"Ping",class:"q-mr-sm q-mb-sm",onClick:m}),e(C,{outline:"",color:"primary",icon:"edit",label:"Edit",class:"q-mr-sm q-mb-sm",onClick:B}),e(C,{outline:"",color:"negative",icon:"delete",label:"Delete",class:"q-mb-sm",onClick:s[2]||(s[2]=h=>F.value=!0)})])])])]),_:1})]),_:1}),o("div",it,[o("div",rt,[e(Q,{class:"content-card q-mb-lg",flat:"",bordered:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[s[11]||(s[11]=o("div",{class:"text-h6 q-mb-md text-weight-medium"},"Contact Information",-1)),t.value.location?(r(),u("div",dt,[o("div",ct,[e(q,{name:"place",size:"20px",color:"grey-7"}),o("div",ut,p(t.value.location),1)])])):w("",!0),t.value.address?(r(),u("div",pt,[o("div",mt,[e(q,{name:"home",size:"20px",color:"grey-7",style:{"margin-top":"2px"}}),o("div",vt,p(t.value.address),1)])])):w("",!0),t.value.company?(r(),u("div",yt,[o("div",ft,[e(q,{name:"business",size:"20px",color:"grey-7"}),o("div",ht,p(t.value.company),1)])])):w("",!0),t.value.email?(r(),u("div",gt,[o("div",_t,[e(q,{name:"email",size:"20px",color:"grey-7"}),o("div",bt,p(t.value.email),1),e(C,{unelevated:"",size:"sm",icon:"content_copy",color:"info","text-color":"white",onClick:M,class:"contact-action-btn"},{default:n(()=>[e(Y,null,{default:n(()=>[...s[7]||(s[7]=[R("Copy Email",-1)])]),_:1})]),_:1})])])):w("",!0),t.value.phone?(r(),u("div",xt,[o("div",wt,[e(q,{name:"phone",size:"20px",color:"grey-7"}),o("div",qt,p(t.value.phone),1),e(C,{unelevated:"",size:"sm",icon:"content_copy",color:"info","text-color":"white",onClick:J,class:"contact-action-btn"},{default:n(()=>[e(Y,null,{default:n(()=>[...s[8]||(s[8]=[R("Copy Phone",-1)])]),_:1})]),_:1})])])):w("",!0),t.value.birthday_display?(r(),u("div",Ct,[o("div",kt,[e(q,{name:"cake",size:"20px",color:"grey-7"}),o("div",Rt,[o("div",Pt,[R(p(t.value.birthday_display)+" ",1),t.value.age?(r(),u("span",Dt,"(Age "+p(t.value.age)+")",1)):w("",!0)]),s[9]||(s[9]=o("div",{class:"text-caption text-grey-6"},"Birthday",-1))])])])):w("",!0),t.value.last_contacted?(r(),u("div",$t,[o("div",Ft,[e(q,{name:"schedule",size:"20px",color:G(t.value.last_contacted)},null,8,["color"]),o("div",Tt,[o("div",{class:he(["text-body1",W(t.value.last_contacted)])},p(T(t.value.last_contacted)),3),s[10]||(s[10]=o("div",{class:"text-caption text-grey-6"},"Last Contact",-1))])])])):w("",!0),t.value.how_we_met?(r(),u("div",Vt,[o("div",zt,[e(q,{name:"handshake",size:"18px",color:"grey-6"}),o("div",Lt,[o("div",Qt,p(t.value.how_we_met),1)])])])):w("",!0)]),_:1})]),_:1}),t.value.notes?(r(),H(Q,{key:0,class:"content-card q-mb-lg",flat:"",bordered:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[s[12]||(s[12]=o("div",{class:"text-h6 q-mb-md text-weight-medium"},"Notes",-1)),o("div",At,p(t.value.notes),1)]),_:1})]),_:1})):w("",!0),(r(),H(je,{key:t.value.id,"person-id":t.value.id,"person-name":t.value.name},null,8,["person-id","person-name"]))]),o("div",It,[t.value.ai_summary?(r(),H(Q,{key:0,class:"content-card q-mb-lg",flat:"",bordered:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[s[13]||(s[13]=o("div",{class:"text-h6 q-mb-md text-weight-medium"},"Conversation History",-1)),o("div",Et,p(t.value.ai_summary),1)]),_:1})]),_:1})):w("",!0),e(Q,{class:"content-card q-mb-lg",flat:"",bordered:""},{default:n(()=>[e(V,{class:"q-pa-lg"},{default:n(()=>[o("div",St,[s[14]||(s[14]=R(" Conversations ",-1)),!$.value&&f.value.length>0?(r(),u("span",Nt,p(f.value.length),1)):w("",!0)]),$.value?(r(),u("div",Bt,[e(X,{size:"20px",color:"primary"}),s[15]||(s[15]=o("div",{class:"text-caption text-grey-6 q-mt-sm"},"Loading conversations...",-1))])):f.value.length===0?(r(),u("div",Ut,[e(q,{name:"chat_bubble_outline",size:"32px",color:"grey-4"}),s[16]||(s[16]=o("div",{class:"text-body2 text-grey-6 q-mt-sm"},"No conversations recorded yet",-1))])):(r(),u("div",Mt,[(r(!0),u(ie,null,re(f.value,h=>(r(),u("div",{key:h.id,class:"conversation-timeline-item q-mb-sm cursor-pointer",onClick:l=>O(h)},[o("div",Ht,[e(te,{size:"32px",color:I(Pe)(h.type),"text-color":"white"},{default:n(()=>[e(q,{name:I(De)(h.type),size:"16px"},null,8,["name"])]),_:2},1032,["color"]),o("div",jt,[o("div",Jt,[R(p(I($e)(h.type))+" ",1),h.location?(r(),u("span",Kt," • "+p(h.location),1)):w("",!0)]),o("div",Yt,p(I(Fe)(h.date)),1),o("div",Gt,p(N(h.notes,150)),1),h.private?(r(),u("div",Wt,[e(q,{name:"lock",class:"q-mb-xs"}),s[17]||(s[17]=R(" Private to you ",-1))])):w("",!0)]),e(q,{name:"chevron_right",color:"grey-4",size:"16px"})])],8,Ot))),128))]))]),_:1})]),_:1})])])])):(r(),u("div",Ge,[e(q,{name:"person_off",size:"80px",color:"grey-5"}),s[6]||(s[6]=o("div",{class:"text-h6 text-grey-7 q-mt-md"}," Person not found ",-1)),e(C,{color:"primary",label:"Back to People",class:"q-mt-md",onClick:b})])),e(Z,{modelValue:F.value,"onUpdate:modelValue":s[4]||(s[4]=h=>F.value=h)},{default:n(()=>[e(Q,null,{default:n(()=>[e(V,{class:"row items-center"},{default:n(()=>[e(te,{icon:"warning",color:"negative","text-color":"white"}),o("span",Xt,[s[18]||(s[18]=R(" Are you sure you want to delete ",-1)),o("strong",null,p(t.value?.name),1),s[19]||(s[19]=R("? This action cannot be undone. ",-1))])]),_:1}),e(ee,{align:"between"},{default:n(()=>[e(C,{flat:"",label:"Cancel",color:"grey-7",onClick:s[3]||(s[3]=h=>F.value=!1)}),e(C,{flat:"",label:"Delete",color:"negative",onClick:U})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}},po=ae(Zt,[["__scopeId","data-v-b0d1e866"]]);export{po as default};
