import{_ as F,c as I,r as R,a as i,o as l,b as o,d as q,e as W,f,g as H,u as M,w as s,Q as U,h as e,i as D,t as d,j as x,k as r,l as m,m as p,n as w,p as c,F as Q,q as P,s as S,v as z}from"./main-BYd-JLfW.js";import{Q as N}from"./QTooltip-CQM5UkJt.js";import{Q as $}from"./QItemLabel-DA6ERGA0.js";import{u as Y,_ as j,a as E,Q as G,b as J,c as V,d as T,e as L,f as K}from"./NavigationDrawer-DbK3DJpq.js";import"./position-engine-A1RGnPhx.js";const X={class:"monthly-chart"},Z={key:0,class:"text-body2 text-grey-6 text-center q-pa-lg"},tt={key:1},et={__name:"ActivityChart",props:{data:{type:Array,default:()=>[]}},setup(C){const g=C,v=I(()=>{if(!g.data||g.data.length===0)return{};const y=g.data.map(_=>_.month_name),n=g.data.map(_=>_.conversations),h=g.data.map(_=>_.contact_attempts);return{chart:{type:"line",backgroundColor:"transparent",spacingTop:20,spacingBottom:20,spacingLeft:20,spacingRight:20},title:{text:null},xAxis:{categories:y,lineColor:"#e0e0e0",tickColor:"#e0e0e0",labels:{style:{color:"#666",fontSize:"12px"}}},yAxis:{title:{text:"Count",style:{color:"#666"}},min:0,gridLineColor:"#f0f0f0",labels:{style:{color:"#666",fontSize:"12px"}}},tooltip:{shared:!0,backgroundColor:"#ffffff",borderColor:"#e0e0e0",borderRadius:8,shadow:!0,useHTML:!0,formatter:function(){let b=`<div style="text-align: center; margin-bottom: 5px; font-weight: bold;">${this.points&&this.points.length>0?this.points[0].category:this.x}</div>`;return this.points&&this.points.forEach(k=>{b+=`<div style="margin: 2px 0;"><span style="color:${k.color}; font-size: 14px;">‚óè</span> ${k.series.name}: <b>${k.y}</b></div>`}),b}},legend:{align:"center",verticalAlign:"bottom",borderWidth:0,itemStyle:{color:"#666",fontSize:"12px"}},plotOptions:{line:{lineWidth:3,states:{hover:{lineWidth:4}}}},series:[{name:"Conversations",data:n,color:"#1976d2",marker:{fillColor:"#1976d2"}},{name:"Pings",data:h,color:"#424242",marker:{fillColor:"#424242"}}],credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},xAxis:{labels:{rotation:-45,style:{fontSize:"10px"}}}}}]}}});return(y,n)=>{const h=R("highcharts");return l(),i("div",X,[!C.data||C.data.length===0?(l(),i("div",Z," No activity data available ")):(l(),i("div",tt,[o(h,{options:v.value,style:{height:"400px",width:"100%"}},null,8,["options"])]))])}}},st=F(et,[["__scopeId","data-v-64cbd7e6"]]),ot={key:0,class:"flex flex-center q-mt-lg"},at={key:1,class:"text-center q-mt-lg"},lt={class:"text-body2"},nt={key:2},it={class:"row items-center q-mb-lg"},dt={class:"col-auto"},rt={class:"q-gutter-sm"},ct={class:"row q-mb-lg"},ut={class:"col-12"},vt={class:"row q-mb-lg"},_t={class:"col-12"},mt={class:"row q-col-gutter-md"},pt={class:"col"},ft={class:"text-h6"},gt={key:0,class:"text-body2"},yt={class:"col"},ht={class:"text-h6"},xt={key:0,class:"text-body2"},wt={class:"col"},bt={class:"text-h6"},kt={key:0,class:"text-body2"},Ct={class:"row q-col-gutter-md q-mb-lg"},qt={class:"col-12 col-md-6"},Qt={class:"col-12 col-md-6"},Pt={key:0,class:"row q-mb-lg"},$t={class:"col-12"},At={class:"row items-center"},Dt={class:"col-auto"},zt={class:"row q-col-gutter-md"},Nt=["onClick"],St={class:"row items-center q-gutter-sm"},Vt={class:"col-auto"},Tt={class:"col"},Lt={key:0,class:"text-weight-bold"},Bt={key:1},Ot={key:2},Ft={key:3,class:"q-ml-sm"},It={class:"row"},Rt={class:"col-12 q-mb-lg"},Wt={class:"row q-col-gutter-md"},Ht={class:"text-h6"},Mt={key:0,class:"text-caption text-grey-6"},Jt={__name:"HomeView",setup(C){const g=M(),v=Y(),y=q(!1),n=q({}),h=q(!0),_=q(null),b=async()=>{try{h.value=!0,_.value=null;const u=await H.get("/dashboard/");n.value=u.data}catch(u){_.value=u.response?.data?.detail||"Failed to load dashboard data",console.error("Dashboard load error:",u)}finally{h.value=!1}},k=u=>new Date(u).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),B=(u,t,a)=>u===1?t:a,O=u=>{g.push({name:"person-detail",params:{id:u}})};return W(()=>{b()}),(u,t)=>(l(),f(K,{view:"lHh Lpr lFf"},{default:s(()=>[o(j,{onToggleDrawer:t[0]||(t[0]=a=>y.value=!y.value)}),o(E,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=a=>y.value=a)},null,8,["modelValue"]),o(G,null,{default:s(()=>[o(J,{class:"q-pa-md"},{default:s(()=>[h.value?(l(),i("div",ot,[o(U,{size:"2em"})])):_.value?(l(),i("div",at,[o(D,{name:"error",size:"2em",color:"negative"}),t[3]||(t[3]=e("div",{class:"text-h6 q-mt-md"},"Failed to load dashboard",-1)),e("div",lt,d(_.value),1),o(x,{onClick:b,color:"primary",class:"q-mt-md"},{default:s(()=>[...t[2]||(t[2]=[r("Retry",-1)])]),_:1})])):(l(),i("div",nt,[e("div",it,[t[7]||(t[7]=e("div",{class:"col"},[e("h1",{class:"text-h4 q-ma-none"},"Dashboard")],-1)),e("div",dt,[e("div",rt,[o(x,{color:"accent",icon:"add_comment",to:{name:"conversation-create"},label:p(v).screen.gt.sm?"New Conversation":p(v).screen.gt.xs?"Conversation":void 0},{default:s(()=>[p(v).screen.gt.xs?m("",!0):(l(),f(N,{key:0},{default:s(()=>[...t[4]||(t[4]=[r("New Conversation",-1)])]),_:1}))]),_:1},8,["label"]),o(x,{color:"secondary",icon:"contact_phone",to:{name:"ping-create"},label:p(v).screen.gt.sm?"New Ping":p(v).screen.gt.xs?"Ping":void 0},{default:s(()=>[p(v).screen.gt.xs?m("",!0):(l(),f(N,{key:0},{default:s(()=>[...t[5]||(t[5]=[r("New Ping",-1)])]),_:1}))]),_:1},8,["label"]),o(x,{color:"primary",icon:"person_add",to:{name:"person-edit",params:{id:"new"}},label:p(v).screen.gt.sm?"Add Person":p(v).screen.gt.xs?"Person":void 0},{default:s(()=>[p(v).screen.gt.xs?m("",!0):(l(),f(N,{key:0},{default:s(()=>[...t[6]||(t[6]=[r("Add Person",-1)])]),_:1}))]),_:1},8,["label"])])])]),e("div",ct,[e("div",ut,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[...t[8]||(t[8]=[e("div",{class:"text-h6"},"Activity Over Past Year",-1)])]),_:1}),o(c,null,{default:s(()=>[o(st,{data:n.value.monthly_activity},null,8,["data"])]),_:1})]),_:1})])]),e("div",vt,[e("div",_t,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[...t[9]||(t[9]=[e("div",{class:"text-h6"},"Conversations Overview",-1)])]),_:1}),o(c,null,{default:s(()=>[e("div",mt,[e("div",pt,[t[11]||(t[11]=e("div",{class:"text-caption"},"Past Week",-1)),e("div",ft,[r(d(n.value.activity_overview.conversations.week)+" ",1),t[10]||(t[10]=e("span",{class:"gt-sm"},"conversations",-1))]),n.value.activity_overview.contact_attempts.week>0?(l(),i("div",gt,"+ "+d(n.value.activity_overview.contact_attempts.week)+" pings",1)):m("",!0)]),e("div",yt,[t[13]||(t[13]=e("div",{class:"text-caption"},"Past Month",-1)),e("div",ht,[r(d(n.value.activity_overview.conversations.month)+" ",1),t[12]||(t[12]=e("span",{class:"gt-sm"},"conversations",-1))]),n.value.activity_overview.contact_attempts.month>0?(l(),i("div",xt,"+ "+d(n.value.activity_overview.contact_attempts.month)+" pings",1)):m("",!0)]),e("div",wt,[t[15]||(t[15]=e("div",{class:"text-caption"},"Past Year",-1)),e("div",bt,[r(d(n.value.activity_overview.conversations.year)+" ",1),t[14]||(t[14]=e("span",{class:"gt-sm"},"conversations",-1))]),n.value.activity_overview.contact_attempts.year>0?(l(),i("div",kt,"+ "+d(n.value.activity_overview.contact_attempts.year)+" pings",1)):m("",!0)])])]),_:1})]),_:1})])]),e("div",Ct,[e("div",qt,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[...t[16]||(t[16]=[e("div",{class:"text-h6"},"Recent Conversations",-1)])]),_:1}),o(c,null,{default:s(()=>[o(V,{separator:""},{default:s(()=>[(l(!0),i(Q,null,P(n.value.recent_conversations.slice(0,8),a=>(l(),f(T,{key:a.id,to:{name:"conversation-detail",params:{id:a.id}},clickable:""},{default:s(()=>[o(L,null,{default:s(()=>[o($,null,{default:s(()=>[r(d(k(a.date)),1)]),_:2},1024),o($,{caption:""},{default:s(()=>[r(d(a.participants.map(A=>A.name).join(", ")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1}),o(S,{align:"center"},{default:s(()=>[o(x,{flat:"",to:{name:"conversations"}},{default:s(()=>[...t[17]||(t[17]=[r("View all",-1)])]),_:1})]),_:1})]),_:1})]),e("div",Qt,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[...t[18]||(t[18]=[e("div",{class:"text-h6"},"Top Contacts",-1),e("div",{class:"text-subtitle2"},"Past two years",-1)])]),_:1}),o(c,null,{default:s(()=>[o(V,{separator:""},{default:s(()=>[(l(!0),i(Q,null,P(n.value.top_contacts.slice(0,8),a=>(l(),f(T,{key:a.id,to:{name:"person-detail",params:{id:a.id}},clickable:""},{default:s(()=>[o(L,null,{default:s(()=>[o($,null,{default:s(()=>[r(d(a.name),1)]),_:2},1024),o($,{caption:""},{default:s(()=>[r(d(a.recent_conversation_count)+" "+d(B(a.recent_conversation_count,"conversation","conversations")),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1}),o(S,{align:"center"},{default:s(()=>[o(x,{flat:"",to:{name:"people"}},{default:s(()=>[...t[19]||(t[19]=[r("View all",-1)])]),_:1})]),_:1})]),_:1})])]),n.value.upcoming_birthdays&&n.value.upcoming_birthdays.length>0?(l(),i("div",Pt,[e("div",$t,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[e("div",At,[t[21]||(t[21]=e("div",{class:"col"},[e("div",{class:"text-h6"}," Upcoming Birthdays ")],-1)),e("div",Dt,[o(x,{flat:"",dense:"",to:{name:"birthdays"},color:"primary"},{default:s(()=>[t[20]||(t[20]=r(" View Calendar ",-1)),o(D,{name:"chevron_right"})]),_:1})])])]),_:1}),o(c,null,{default:s(()=>[e("div",zt,[(l(!0),i(Q,null,P(n.value.upcoming_birthdays.slice(0,6),a=>(l(),i("div",{key:a.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e("div",{class:z(["birthday-item q-pa-sm rounded-borders cursor-pointer",{"bg-accent text-white":a.is_today,"bg-grey-3":!a.is_today}]),onClick:A=>O(a.id)},[e("div",St,[e("div",Vt,[o(D,{name:a.is_today?"celebration":"cake",size:"24px",color:a.is_today?"white":"primary"},null,8,["name","color"])]),e("div",Tt,[e("div",{class:z([a.is_today?"text-white":"text-body1","text-weight-medium"])},d(a.name),3),e("div",{class:z(a.is_today?"text-white":"text-caption text-grey-6")},[a.is_today?(l(),i("span",Lt,"Today!")):a.days_until===1?(l(),i("span",Bt,"Tomorrow")):(l(),i("span",Ot,d(a.days_until)+" days",1)),a.age?(l(),i("span",Ft,"("+d(a.age+1*!a.is_today)+")",1)):m("",!0)],2)])])],10,Nt)]))),128))])]),_:1})]),_:1})])])):m("",!0),e("div",It,[e("div",Rt,[o(w,null,{default:s(()=>[o(c,null,{default:s(()=>[...t[22]||(t[22]=[e("div",{class:"text-h6"},"People to Ping",-1)])]),_:1}),n.value.people_to_reach_out.length===0?(l(),f(c,{key:0},{default:s(()=>[...t[23]||(t[23]=[e("div",{class:"text-body2 text-grey-6"},"Great! You're up to date with everyone.",-1)])]),_:1})):(l(),f(c,{key:1},{default:s(()=>[e("div",Wt,[(l(!0),i(Q,null,P(n.value.people_to_reach_out,a=>(l(),i("div",{key:a.id,class:"col-12 col-sm-6 col-md-4"},[o(w,{class:"cursor-pointer",onClick:A=>u.$router.push({name:"person-detail",params:{id:a.id}})},{default:s(()=>[o(c,null,{default:s(()=>[e("div",Ht,d(a.name),1),a.days_since_last_contact?(l(),i("div",Mt,d(a.days_since_last_contact)+" days ago ",1)):m("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1}))]),_:1})])])]))]),_:1})]),_:1})]),_:1}))}};export{Jt as default};
